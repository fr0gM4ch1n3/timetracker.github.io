import{a as G,b as V,c as J,d as L,e as O,f as h,h as P,i as q,m as z}from"./chunk-P3VZHUOC.js";import{B as u,Ha as M,I as b,Ia as A,J as w,La as $,Na as j,Pa as B,Q as m,X as s,da as a,f as k,fa as _,ga as D,ha as E,i as T,ia as o,ja as n,ka as p,la as N,ma as U,n as y,na as f,p as d,ra as c,sa as F,t as l,ta as C,v as R,va as I,xa as g,y as x,ya as v}from"./chunk-LJKRH4RH.js";var H=(()=>{class i{#e=new k({});constructor(){let e;try{e=JSON.parse(localStorage.getItem("time"))}catch{e=null}e?this.#e.next(e):this.#e.next({})}add(e,t){return this.#e.pipe(d(1),T(r=>(Array.isArray(r[e])||(r[e]=[]),r[e].push(t),r)),R(r=>localStorage.setItem("time",JSON.stringify(r))),R(r=>this.#e.next(r)))}getAll(e){return this.#e.pipe(T(t=>t[e]??[]))}static \u0275fac=function(t){return new(t||i)};static \u0275prov=x({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var K=(()=>{class i{submitTimeRecord=b();form=new O({description:new h(null),time:new h(null)});submit(){this.submitTimeRecord.emit({description:this.form.value.description,time:parseInt(this.form.value.time)}),this.form.reset()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=s({type:i,selectors:[["tt-new-time-record"]],outputs:{submitTimeRecord:"submitTimeRecord"},decls:7,vars:3,consts:[[3,"formGroup"],["type","text",3,"formControlName"],[3,"click"]],template:function(t,r){t&1&&(N(0,0),o(1,"div"),p(2,"input",1),n(),o(3,"div"),p(4,"input",1),n(),o(5,"button",2),f("click",function(){return r.submit()}),c(6,"add"),n(),U()),t&2&&(a("formGroup",r.form),m(2),a("formControlName","description"),m(2),a("formControlName","time"))},dependencies:[z,V,J,L,P,q],styles:[`:host{display:grid;padding:16px;gap:16px;border-radius:16px;background-color:#eee;grid-template-columns:2fr 1fr 50px}input{width:100%}
`],encapsulation:3,changeDetection:0})}return i})();var Q=(()=>{class i{timeRecord=w.required();static \u0275fac=function(t){return new(t||i)};static \u0275cmp=s({type:i,selectors:[["tt-time-record"]],inputs:{timeRecord:[1,"timeRecord"]},decls:5,vars:2,template:function(t,r){t&1&&(o(0,"div"),c(1),n(),o(2,"div"),c(3),n(),p(4,"div")),t&2&&(m(),C(" ",r.timeRecord().description,`
`),m(2),C(" ",r.timeRecord().time,`
`))},styles:[`:host{display:grid;padding:16px;gap:16px;border-radius:16px;background-color:#eee;grid-template-columns:2fr 1fr 50px}
`],encapsulation:3,changeDetection:0})}return i})();var Z=()=>[".."];function ee(i,W){if(i&1&&p(0,"tt-time-record",2),i&2){let e=W.$implicit;a("timeRecord",e)}}var Ee=(()=>{class i{activatedRoute=u($);usersService=u(G);timeService=u(H);user$=this.activatedRoute.params.pipe(l(e=>this.usersService.get(e.userId)));timeRecords$=this.user$.pipe(y(e=>!!e),l(e=>this.timeService.getAll(e.id)));submitTimeRecord(e){this.user$.pipe(y(t=>!!t),l(t=>this.timeService.add(t?.id,e)),d(1)).subscribe()}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=s({type:i,selectors:[["tt-user"]],decls:12,vars:9,consts:[[3,"routerLink"],[1,"list"],[3,"timeRecord"],[3,"submitTimeRecord"]],template:function(t,r){t&1&&(o(0,"a",0),c(1,"back"),n(),o(2,"div")(3,"pre"),c(4),g(5,"async"),g(6,"json"),n()(),o(7,"div",1),D(8,ee,1,1,"tt-time-record",2,_),g(10,"async"),o(11,"tt-new-time-record",3),f("submitTimeRecord",function(Y){return r.submitTimeRecord(Y)}),n()()),t&2&&(a("routerLink",I(8,Z)),m(4),F(v(6,4,v(5,2,r.user$))),m(4),E(v(10,6,r.timeRecords$)))},dependencies:[M,A,B,j,Q,K],styles:[`tt-time-record+tt-time-record,tt-time-record+tt-new-time-record{margin-top:8px}
`],encapsulation:3,changeDetection:0})}return i})();export{Ee as TimetrackingUserComponent};
